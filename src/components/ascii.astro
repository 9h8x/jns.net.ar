---
import figlet from "figlet";
import standard from "figlet/importable-fonts/Standard.js";
import bigMoneyNe from "figlet/importable-fonts/Big Money-ne.js";
import bigMoneyNw from "figlet/importable-fonts/Big Money-nw.js";
import bigMoneySe from "figlet/importable-fonts/Big Money-se.js";
import bigMoneySw from "figlet/importable-fonts/Big Money-sw.js";
import big from "figlet/importable-fonts/Big.js";
import doom from "figlet/importable-fonts/Doom.js";
import graceful from "figlet/importable-fonts/Graceful.js";
import ogre from "figlet/importable-fonts/Ogre.js";
import slant from "figlet/importable-fonts/Slant.js";
import terrace from "figlet/importable-fonts/Terrace.js";

const { position = "centered" } = Astro.props;

// Parse and load fonts
figlet.parseFont("Standard", standard);
figlet.parseFont("Big Money-ne", bigMoneyNe);
figlet.parseFont("Big Money-nw", bigMoneyNw);
figlet.parseFont("Big Money-se", bigMoneySe);
figlet.parseFont("Big Money-sw", bigMoneySw);
figlet.parseFont("Big", big);
figlet.parseFont("Doom", doom);
figlet.parseFont("Graceful", graceful);
figlet.parseFont("Ogre", ogre);
figlet.parseFont("Slant", slant);
figlet.parseFont("Terrace", terrace);

const Fonts = [
  "Big Money-ne",
  "Big Money-nw",
  "Big Money-se",
  "Big Money-sw",
  "Big",
  "Doom",
  "Graceful",
  "Ogre",
  "Slant",
  "Terrace",
];

function ascii(text: string) {
  const font = Fonts[Math.floor(Math.random() * Fonts.length)];
  return new Promise((resolve, reject) => {
    figlet.text(
      text,
      {
        font,
        horizontalLayout: "default",
        verticalLayout: "default",
        width: 100,
        whitespaceBreak: true,
      },
      (err, data) => (err ? reject(err) : resolve(data))
    );
  });
}

const artDesktop = await ascii("jns.net.ar");
const artMobile = await ascii("jns");

// Layout variant class
const wrapperClass =
  position === "top"
    ? "p-4"
    : "p-6"; // centered
---
<div
  class={`backdrop-blur-sm bg-white/40 dark:bg-neutral-800/30 rounded-lg border border-neutral-900/20 shadow-2xl min-h-[180px] flex items-center justify-center ${wrapperClass}`}
  transition:name="ascii"
>

  <!-- Desktop ASCII -->
  <pre class="hidden md:block font-mono text-xs leading-none text-gray-800 dark:text-white text-center">
{artDesktop}
  </pre>

  <!-- Mobile ASCII -->
  <pre class="block md:hidden font-mono text-xs leading-none text-gray-800 dark:text-white text-center">
{artMobile}
  </pre>

</div>