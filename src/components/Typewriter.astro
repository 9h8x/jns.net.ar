---
export interface Props {
  speed?: number;
}

const { 
  speed = 100,
} = Astro.props;
---

<style>
  .typewriter-container {
    display: inline;
    white-space: nowrap;
    letter-spacing: 0.05ch;
  }

  .cursor {
    display: inline-block;
    width: 1ch;
    opacity: 1;
    transition: opacity 0.4s ease-in-out;
  }

  .cursor.blink {
    animation: blink 1s step-start infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50%      { opacity: 0; }
  }
</style>

<p class="typewriter-container">
  <span id="typewriter"></span><span id="cursor" class="cursor">|</span>
</p>

<script define:vars={{speed }} data-astro-rerun>
  let i = 0;
  const el = document.getElementById("typewriter");
  const cursor = document.getElementById("cursor");
  text = 'jns.net.ar'
  if (window.location.pathname.length > 1) {
    text = window.location.pathname.slice(1);
  }
  function typeWriter() {
    if (i < text.length) {
      el.textContent += text.charAt(i);
      i++;
      setTimeout(typeWriter, speed);
    } else {
      cursor.classList.add("blink"); // Smooth blink after done
    }
  }

  typeWriter();
</script>
